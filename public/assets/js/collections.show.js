!function(e){var t={};function i(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(o,n,function(t){return e[t]}.bind(null,n));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i(i.s=45)}({45:function(e,t,i){e.exports=i("9UIW")},"9UIW":function(e,t,i){"use strict";i.r(t);var o=i("Qo6h");$(".collection").each((function(){(new o.a).init($(this))}))},Qo6h:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var o=i("kW2s"),n=i("ZI2Y");function a(e,t){e.data("type"),e.data("id");var i=e.find("[data-status=wait]"),o=e.find("[data-status=filled]"),n=e.find("[data-status=empty]"),a=e.find(".count");void 0===t&&(t=e.data("url")),e.unbind("click").on("click",(function(r){e.removeClass("active").attr("disabled","disabled"),i.show(),o.hide(),n.hide(),$.ajax({method:"GET",url:t,dataType:"json"}).done((function(t){i.hide(),e.removeAttr("disabled"),"attached"==t.result?(n.hide(),o.show()):(n.show(),o.hide()),a.text(t.count)})).fail((function(){i.hide(),e.removeAttr("disabled"),n.show()}))}))}function r(){this.init=function(e){var t=this;t.i=e,t.id=e.data("id"),t.$id=t.id,t.$btn_delete=e.find(".delete").first(),t.$btn_restore=e.find(".restore").first(),t.$btn_get_link=e.find(".get_link").first(),t.$btn_share=e.find("button.share").first(),t.$btn_favorite_toggle=e.find(".btn-favorite").first(),t.$btn_get_link.removeAttr("href").unbind("click").on("click",t.get_link),t.$btn_delete.unbind("click").on("click",(function(e){e.preventDefault(),t.deleteOrRestore($(this))})),t.$btn_restore.unbind("click").on("click",(function(e){e.preventDefault(),t.deleteOrRestore($(this))})),e.find(".like").each((function(){(new o.a).init($(this))})),(new n.a).init(t.$btn_share),a(t.$btn_favorite_toggle)},this.deleteOrRestore=function(e){var t=this;e.button("loading"),e.hide();var i=e.attr("href");$.ajax({method:"DELETE",url:i}).done((function(e){t.onDelete(e)})).fail((function(){t.onDeleteFail()}))},this.get_link=function(e){e.preventDefault(),bootbox.alert('<textarea class="form-control">'+this.$btn_get_link.data("href")+"</textarea>")},this.onDelete=function(e){e.deleted_at?(this.$btn_delete.hide(),this.$btn_restore.show(),this.i.addClass("transparency")):(this.$btn_delete.show(),this.$btn_restore.hide(),this.i.removeClass("transparency")),this.$btn_restore.button("reset"),this.$btn_delete.button("reset")},this.onDeleteFail=function(){btn.show()}}},ZI2Y:function(e,t,i){"use strict";function o(){var e=this;this.init=function(t){e.button=t,e.title=t.data("title"),e.description=t.data("description"),e.url=t.data("url"),e.image=t.data("image"),e.dialog=bootbox.dialog({message:'<div class="spinner" style="text-align: center; font-size:48px;"><i class="fas fa-spinner fa-spin"></i></div>',closeButton:!0,backdrop:!0,show:!1,size:"small"}),e.button.unbind("click").on("click",(function(){e.dialog.modal("show")})),e.dialog.on("shown.bs.modal",(function(t){e.onDialogOpen(t)}))},this.onDialogOpen=function(t){var i='<div data-direction="vertical" data-size="m" class="ya-share2" data-services="collections,vkontakte,facebook,odnoklassniki,';void 0!==e.image&&(i+="pinterest,"),i+='twitter,telegram,whatsapp,viber,moimir,blogger,delicious,digg,reddit,evernote,linkedin,lj,pocket,qzone,renren,sinaWeibo,surfingbird,tencentWeibo,tumblr,skype" data-counter="true" data-title="'+e.title+'" data-description="'+e.description+'" ',void 0!==e.image&&(i+='data-image="'+e.image+'" '),i+='data-url="'+e.url+'">';$(t.relatedTarget);e.dialog.find(".bootbox-body").html(i),$.getScript("//cdn.jsdelivr.net/npm/yandex-share2/share.js",(function(e,t,i){}))}}i.d(t,"a",(function(){return o}))},kW2s:function(e,t,i){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(){var e=this;this.init=function(t){e.like=t,e.like.btn_liked=e.like.find("button.liked"),e.like.btn_empty=e.like.find("button.empty"),e.like.counter=e.like.find(".counter"),e.like.last_liked_status=e.like.data("liked"),e.likeable_type=e.like.data("likeable-type"),e.likeable_id=e.like.data("likeable-id"),e.likeable_create_user_id=e.like.data("likeable-create-user-id"),e.mouseOverDelay=1e3,e.mouseLeaveDelay=1e3,e.like.btn_liked.unbind("click").on("click",e.onClick),e.like.btn_empty.unbind("click").on("click",e.onClick),e.like.popover({boundary:"window",placement:"top",html:!0,trigger:"manual",animation:!1}),e.like.unbind("shown.bs.popover").bind("shown.bs.popover",e.onPopoverShown),e.like.unbind("mouseover").bind("mouseover",e.onButtonMouseOver),e.like.unbind("mouseleave").bind("mouseleave",e.onButtonMouseLeave)},this.onClick=function(){var t=$(this);e.isLiked()?e.decrementCounter():e.incrementCounter(),t.addClass("loading-cap"),e.setPopoverHtml('<i class="fas fa-spinner fa-spin"></i>'),e.getCount()>0&&e.showPopover(),e.request(t)},this.onButtonMouseOver=function(){clearTimeout(e.mouseOverTimer),e.mouseOverTimer=setTimeout((function(){!e.isMouseAway()&&e.getCount()>0&&(e.load(),e.isDataLoaded()&&e.showPopover())}),e.mouseOverDelay)},this.onButtonMouseLeave=function(){clearTimeout(e.mouseLeaveTimer),e.mouseLeaveTimer=setTimeout((function(){e.hidePopoverIfMouseAwayAndPopoverOpened()}),e.mouseLeaveDelay)},this.onPopoverShown=function(){e.getPopover().unbind("mouseleave").bind("mouseleave",e.onPopoverMouseLeave)},this.onPopoverMouseLeave=function(){clearTimeout(e.mouseLeaveTimer),e.mouseLeaveTimer=setTimeout((function(){e.hidePopoverIfMouseAwayAndPopoverOpened()}),e.mouseLeaveDelay)},this.hidePopoverIfMouseAwayAndPopoverOpened=function(){e.isMouseAway()&&e.hidePopover()},this.request=function(t){$.ajax({method:"GET",url:"/likes/"+e.likeable_type+"/"+e.likeable_id}).done(e.onDoneLoadClick).fail(e.fail).always((function(){t.removeClass("loading-cap")}))},this.onDoneLoadClick=function(t){t.like.id?t.like.deleted_at?e.toggleToEmpty():e.toggleToLiked():e.toggleToEmpty(),e.setCount(t.item.like_count),e.getCount()<1?e.hidePopover():e.refreshTooltipContent(t.latest_likes_html)},this.fail=function(t){e.hidePopover(),e.isLiked()?e.incrementCounter():e.decrementCounter()},this.refreshTooltipContent=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";""!==t?(e.dataLoaded(),e.setPopoverHtml(t)):(e.dataNotLoaded(),e.load())},this.load=function(){e.like.data("ajax-start")||e.isDataLoaded()||$.ajax({url:"/likes/"+e.likeable_type+"/"+e.likeable_id+"/tooltip",cache:!0,beforeSend:function(t){e.showPopover(),e.setPopoverHtml('<i class="fas fa-spinner fa-spin"></i>'),e.like.data("ajax-start",!0)}}).done((function(t){e.setPopoverHtml(t),e.dataLoaded()})).always((function(){e.like.data("ajax-start",!1)}))},this.incrementCounter=function(){var t=e.getCount();e.setCount(t+1)},this.decrementCounter=function(){var t=e.getCount();e.setCount(t-1)},this.setCount=function(t){t=parseInt(t),e.like.counter.text(t),t<1?e.like.counter.hide():e.like.counter.show()},this.toggleToLiked=function(){e.like.btn_liked.show(),e.like.btn_empty.hide()},this.toggleToEmpty=function(){e.like.btn_liked.hide(),e.like.btn_empty.show()},this.setPopoverHtml=function(t){var i=$("<div>"+t+"</div>");i.find("img.lazyload").each((function(){$(this).attr("src",$(this).data("src"))}));var o=e.like.attr("aria-describedby");e.isPopoverOpened()&&$("#"+o).find(".popover-body").html(i.html()),e.like.attr("data-content",i.html()),e.updatePopover()},this.dataLoaded=function(){e.like.data("data-loaded",!0)},this.dataNotLoaded=function(){e.like.data("data-loaded",!1)},this.isDataLoaded=function(){return!!e.like.data("data-loaded")},this.isPopoverOpened=function(){var t=e.like.attr("aria-describedby");return"undefined"!==o(t)&&!1!==t},this.isMouseAway=function(){var t=e.like.attr("aria-describedby");return!e.like.is(":hover")&&0===$("#"+t+":hover").length},this.isLiked=function(){return!!e.like.btn_liked.is(":visible")},this.isTouchDevice=function(){return window.isTouchDevice()},this.getCount=function(){return parseInt(e.like.counter.first().text(),10)},this.getPopover=function(){var t=e.like.attr("aria-describedby");return $("#"+t).first()},this.showPopover=function(){e.isPopoverOpened()||(e.like.popover("show"),e.like.popover("update"))},this.hidePopover=function(){e.isPopoverOpened()&&e.like.popover("hide")},this.updatePopover=function(){e.isPopoverOpened()&&e.like.popover("update")}}i.d(t,"a",(function(){return n}))}});