!function(e){var n={};function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(i,o,function(n){return e[n]}.bind(null,o));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/",t(t.s=48)}({"2kO0":function(e,n,t){"use strict";t.r(n);var i=t("Bmo8"),o=t("HUPK"),s=t("FzaM");function a(){var e=this;this.init=function(n){e.i=n,e.id=e.i.data("id"),e.complainable_type=e.i.data("type"),e.complainable=e.i.find(".complainable").first(),e.complain_buttons=e.i.find(".complain_buttons").first(),"blog"===e.complainable_type?Object(i.a)(e.complainable.find(".item").first()):"post"===e.complainable_type?Object(o.a)(e.complainable.find(".item").first()):"comment"===e.complainable_type&&Object(s.a)(e.complainable.find(".item").first()),e.btn_approve=e.complain_buttons.find(".btn-approve").first(),e.btn_decline=e.complain_buttons.find(".btn-decline").first(),e.start_review=e.complain_buttons.find(".btn-start-review").first(),e.stop_review=e.complain_buttons.find(".btn-stop-review").first(),e.status=e.i.find(".status").first(),e.btn_approve.unbind("click").on("click",e.onApprove),e.btn_decline.unbind("click").on("click",e.onDecline),e.start_review.unbind("click").on("click",e.onStartReview),e.stop_review.unbind("click").on("click",e.onStopReview)},this.onApprove=function(n){var t=$(this);n.preventDefault(),t.addClass("loading-cap"),$.ajax({method:"GET",url:e.btn_approve.attr("href")}).done((function(n){t.removeClass("loading-cap"),e.status.html(n),e.btn_approve.hide(),e.btn_decline.hide(),e.start_review.hide(),e.stop_review.hide()})).fail((function(){t.removeClass("loading-cap")}))},this.onStartReview=function(n){var t=$(this);n.preventDefault(),t.addClass("loading-cap"),$.ajax({method:"GET",url:e.start_review.attr("href")}).done((function(n){t.removeClass("loading-cap"),e.status.html(n),e.btn_approve.show(),e.btn_decline.show(),e.start_review.hide(),e.stop_review.show()})).fail((function(){t.removeClass("loading-cap")}))},this.onStopReview=function(n){var t=$(this);n.preventDefault(),t.addClass("loading-cap"),$.ajax({method:"GET",url:e.stop_review.attr("href")}).done((function(n){t.removeClass("loading-cap"),e.status.html(n),e.btn_approve.hide(),e.btn_decline.hide(),e.start_review.show(),e.stop_review.hide()})).fail((function(){t.removeClass("loading-cap")}))}}$(".complain").each((function(){(new a).init($(this))}))},48:function(e,n,t){e.exports=t("2kO0")},Bmo8:function(e,n,t){"use strict";t.d(n,"a",(function(){return s}));var i=t("kW2s"),o=t("ZI2Y");function s(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=e.data("user-id"),a=e.data("id"),d=a,r=e.data("level"),c=e.find(".buttons-panel").first();e.descendants=e.find(".descendants").first();var l=e.find(".html_box").first(),f=c.find(".open_descendants").first(),u=c.find(".close_descendants").first();e.counter_expand_descendants=f.find(".counter:first"),e.counter_compress_descendants=u.find(".counter:first");var p=c.find(".delete").first(),h=c.find(".restore").first(),m=c.find(".btn-edit").first(),v=c.find(".get_link").first(),b=c.find(".btn-reply").first(),_=c.find(".btn-expand").first(),k=c.find(".btn-compress").first(),g=c.find("button.share").first(),x=(c.data("parent-id"),c.find(".approve").first());function w(){event.preventDefault();var n=e.descendants.children(".reply-box").first();n.length<1?(b.addClass("loading-cap"),$.ajax({method:"GET",url:b.attr("href")}).done((function(n){e.descendants.append(n);var t=e.descendants.children(".reply-box").first();$(window).scrollTo(t),b.removeClass("loading-cap");var i=t.find("form").first();set_sceditor(i.find(".sceditor").first().get(0)),i.ajaxForm({dataType:"json",beforeSend:function(e){t.addClass("loading-cap")},success:function(n){$.ajax({method:"GET",url:"/blogs/"+n.id}).done((function(i){t.removeClass("loading-cap"),t.after(i),t.remove(),e.descendants.find(".item[data-id='"+n.id+"']").each((function(){s($(this),e)})),e.increment_childs()}))},error:function(e){t.removeClass("loading-cap")}})}))):$(window).scrollTo(n)}function y(n){n.button("loading"),n.hide(),$.ajax({method:"DELETE",url:"/users/"+t+"/blogs/"+a}).done((function(n){n.deleted_at?(p.hide(),h.show(),l.addClass("transparency"),null!=e.parent&&e.parent.decrement_childs(),T(),f.remove(),u.remove()):(p.show(),h.hide(),l.removeClass("transparency"),null!=e.parent&&e.parent.increment_childs()),h.button("reset"),p.button("reset")}))}function C(){f.addClass("loading-cap"),u.addClass("loading-cap"),e.descendants.children(".item").remove(),e.descendants.prepend('<div class="spinner" style="text-align: center; font-size:48px;"><i class="fas fa-spinner fa-spin"></i></div>'),$.ajax({method:"GET",url:"/users/"+t+"/blogs/"+a+"/loadChild?level="+r}).done((function(n){e.descendants.find(".spinner").remove(),e.descendants.prepend(n),e.descendants.find(".item:first").siblings(".item").addBack().each((function(){s($(this),e)})),f.hide(),u.removeClass("loading-cap"),u.show()})).always((function(){f.removeClass("loading-cap")}))}function T(){e.descendants.children(".item").remove(),u.hide(),f.show()}function j(){event.preventDefault(),m.hide(),$.ajax({method:"GET",url:m.attr("href")}).done((function(n){l.hide(),l.after(n);var t=e.self.find("form:first");set_sceditor(t.find(".sceditor").first().get(0)),$(window).scrollTo(e),m.hide(),t.ajaxForm({dataType:"json",beforeSend:function(e){t.addClass("loading-cap")},success:function(n){l.html(n.text),l.show(),t.remove(),s(e),$(window).scrollTo(e),m.show()},error:function(e){t.removeClass("loading-cap")}})})).fail((function(){m.show()}))}function E(e){e.preventDefault(),bootbox.alert('<textarea class="form-control">'+v.data("href")+"</textarea>")}e.self=e.find("[data-self]:first"),e.parent=n,l.htmlExpand({expand_button:_,compress_button:k,onExpand:function(){},onCompress:function(){$(window).scrollTo(e)}}),e.find(".like").each((function(){(new i.a).init($(this))})),(new o.a).init(g),p.unbind("click").on("click",(function(){y($(this))})),h.unbind("click").on("click",(function(){y($(this))})),f.unbind("click").on("click",C),u.unbind("click").on("click",T),v.removeAttr("href").unbind("click").on("click",E),b.unbind("click").on("click",w),m.unbind("click").on("click",j),x.unbind("click").on("click",L),e.descendants.find(".item:first").siblings(".item").addBack().each((function(){s($(this),e)})),e.increment_childs=function(){var n=e.counter_expand_descendants.text();n=parseInt(n,10)+1,e.counter_expand_descendants.text(n),n=e.counter_compress_descendants.text(),n=parseInt(n,10)+1,e.counter_compress_descendants.text(n),n>0&&!f.is(":visible")&!u.is(":visible")&&u.show()},e.decrement_childs=function(){var n=e.counter_expand_descendants.text();n=parseInt(n,10)-1,e.counter_expand_descendants.text(n),n=e.counter_compress_descendants.text(),n=parseInt(n,10)-1,e.counter_compress_descendants.text(n),n<1&&(f.is(":visible")||u.is(":visible"))&&u.hide()};var P=e.find(".get_user_agent").first();function D(){var e=bootbox.dialog({message:" ",closeButton:!0,backdrop:!0}).init((function(){var n=e.find(".bootbox-body");n.html('<div class="spinner" style="text-align: center; font-size:48px;"><i class="fas fa-spinner fa-spin"></i></div>'),$.ajax({method:"GET",url:"/user_agents/blog/"+d}).done((function(e){n.find(".spinner").remove(),n.html(e)})).always((function(){}))}))}function L(){event.preventDefault(),event.stopPropagation(),x.hide(),$.ajax({method:"GET",url:"/blogs/"+d+"/approve"}).done((function(e){e.status_changed_at||$(this).show()}))}P.unbind("click").on("click",D)}},FzaM:function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));var i=t("ZI2Y");function o(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=e.data("id"),s=e.data("level"),a=(e.data("commentable-type"),e.data("commentable-id"),e.find(".html_box").first()),d=e.find(".buttons-panel").first();e.descendants=e.find(".descendants").first();var r=d.find(".open_descendants").first(),c=d.find(".close_descendants").first();e.counter_expand_descendants=r.find(".counter:first"),e.counter_compress_descendants=c.find(".counter:first");var l=d.find(".btn-expand").first(),f=d.find(".btn-compress").first(),u=d.find(".delete").first(),p=d.find(".restore").first(),h=d.find(".get_link").first(),m=d.find(".comment_like").first(),v=d.find(".approve").first(),b=d.find(".btn-edit").first(),_=d.find(".btn-reply").first(),k=d.find("button.share").first(),g=d.find(".publish").first();e.data("parent-id");function x(){r.attr("disabled","disabled"),c.attr("disabled","disabled"),e.descendants.html('<div class="text-align: center; font-size:48px;"><i class="fas fa-spinner fa-spin"></i></div>'),$.ajax({method:"GET",url:"/comments/"+t+"/descendants?level="+s}).done((function(n){e.descendants.html(n),e.descendants.find(".item:first").siblings(".item").addBack().each((function(){o($(this),e)})),r.hide(),c.removeAttr("disabled"),c.show()})).always((function(){r.removeAttr("disabled")}))}function w(){e.descendants.children(".item").remove(),c.hide(),r.show()}function y(n){n.button("loading"),n.hide(),$.ajax({method:"DELETE",url:"/comments/"+t}).done((function(n){n.deleted_at?(u.hide(),p.show(),a.addClass("transparency"),null!=e.parent&&e.parent.decrement_childs()):(u.show(),p.hide(),a.removeClass("transparency"),null!=e.parent&&e.parent.increment_childs()),p.button("reset"),u.button("reset")}))}function C(){var e=m.find(".counter"),n=m.find("button.liked"),i=m.find("button.empty");m.addClass("loading-cap");var o=parseInt(e.first().text());isNaN(o)&&(o=0),n.is(":visible")?(n.hide(),i.show(),o--):(n.show(),i.hide(),o++),e.text(o),$.ajax({method:"GET",url:"/comments/"+t+"/vote/1"}).done((function(t){(o=t.vote_up)<1&&(o=""),e.text(o),o>0?e.show():e.hide(),t.vote>0?(n.show(),i.hide()):(n.hide(),i.show()),m.removeClass("loading-cap")})).fail((function(t){n.is(":visible")?(n.hide(),i.show(),e.text(o-1)):(n.show(),i.hide(),e.text(o+1)),m.removeClass("loading-cap")}))}function T(){event.preventDefault(),event.stopPropagation(),v.hide(),$.ajax({method:"GET",url:"/comments/"+t+"/approve"}).done((function(e){e.status_changed_at||$(this).show()}))}function j(e){e.preventDefault(),bootbox.alert('<textarea class="form-control">'+h.data("href")+"</textarea>")}function E(n){n.preventDefault();var t=e.descendants.children(".reply-box").first();t.length<1?(_.addClass("loading-cap"),$.ajax({method:"GET",url:_.attr("href")}).done((function(n){e.descendants.append(n);var t=e.descendants.children(".reply-box").first();$(window).scrollTo(t),_.removeClass("loading-cap");var i=t.find("form").first();set_sceditor(i.find(".sceditor").first().get(0)),i.ajaxForm({dataType:"json",beforeSend:function(e){t.addClass("loading-cap")},success:function(n){$.ajax({method:"GET",url:"/comments/"+n.id}).done((function(i){t.removeClass("loading-cap"),t.after(i),t.remove(),e.descendants.find(".item[data-id='"+n.id+"']").each((function(){o($(this),e)})),e.increment_childs()}))},error:function(e){t.removeClass("loading-cap")}})})).fail((function(e){_.removeClass("loading-cap")}))):$(window).scrollTo(t)}function P(){event.preventDefault(),b.hide(),$.ajax({method:"GET",url:b.attr("href")}).done((function(n){a.hide(),a.after(n);var t=e.self.find("form:first");set_sceditor(t.find(".sceditor").first().get(0)),$(window).scrollTo(e),t.ajaxForm({dataType:"json",beforeSend:function(e){t.addClass("loading-cap")},success:function(n){a.html(n.text),a.show(),t.remove(),o(e),$(window).scrollTo(e),b.show()},error:function(e){t.removeClass("loading-cap")}})})).fail((function(){b.show()}))}e.self=e.find("[data-self]:first"),e.parent=n,_.unbind("click").on("click",E),b.unbind("click").on("click",P),h.removeAttr("href").unbind("click").on("click",j),v.unbind("click").on("click",T),a.htmlExpand({expand_button:l,compress_button:f,onExpand:function(){},onCompress:function(){$(window).scrollTo(e)}}),(new i.a).init(k),u.unbind("click").on("click",(function(){y($(this))})),p.unbind("click").on("click",(function(){y($(this))})),r.unbind("click").on("click",x),c.unbind("click").on("click",w),m.unbind("click").on("click",(function(){C()})),e.descendants.find(".item:first").siblings(".item").addBack().each((function(){o($(this),e)})),e.increment_childs=function(){var n=e.counter_expand_descendants.text();n=parseInt(n,10)+1,e.counter_expand_descendants.text(n),n=e.counter_compress_descendants.text(),n=parseInt(n,10)+1,e.counter_compress_descendants.text(n),n>0&&!r.is(":visible")&!c.is(":visible")&&c.show()},e.decrement_childs=function(){var n=e.counter_expand_descendants.text();n=parseInt(n,10)-1,e.counter_expand_descendants.text(n),n=e.counter_compress_descendants.text(),n=parseInt(n,10)-1,e.counter_compress_descendants.text(n),n<1&&(r.is(":visible")||c.is(":visible"))&&c.hide()};var D=e.find(".get_user_agent").first();function L(){var e=bootbox.dialog({message:" ",closeButton:!0,backdrop:!0}).init((function(){var n=e.find(".bootbox-body");n.html('<div class="spinner" style="text-align: center; font-size:48px;"><i class="fas fa-spinner fa-spin"></i></div>'),$.ajax({method:"GET",url:"/user_agents/comment/"+t}).done((function(e){n.find(".spinner").remove(),n.html(e)})).always((function(){}))}))}D.unbind("click").on("click",L);var O=e.find(".private_status").first();g.unbind("click").on("click",(function(e){e.preventDefault(),e.stopPropagation(),g.addClass("loading-cap"),$.ajax({method:"GET",url:g.attr("href")}).done((function(e){g.hide(),O.remove()})).fail((function(){})).always((function(){g.removeClass("loading-cap")}))}))}},HUPK:function(e,n,t){"use strict";t.d(n,"a",(function(){return s}));var i=t("kW2s"),o=t("ZI2Y");function s(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=(e.data("topic-id"),e.data("id")),a=t,d=e.data("level");e.descendants=e.find(".descendants").first();var r=e.find(".buttons-panel").first(),c=r.find(".open_descendants").first(),l=r.find(".close_descendants").first();e.counter_expand_descendants=c.find(".counter:first"),e.counter_compress_descendants=l.find(".counter:first");var f=r.find(".btn-expand").first(),u=r.find(".btn-compress").first(),p=r.find(".delete").first(),h=r.find(".restore").first(),m=r.find(".get_link").first(),v=r.find(".approve"),b=r.find(".btn-edit").first(),_=r.find(".btn-reply").first(),k=(r.data("parent-id"),r.find("button.share").first()),g=e.find(".html_box").first();function x(){g.htmlExpand({expand_button:f,compress_button:u,onExpand:function(){},onCompress:function(){$(window).scrollTo(e)}})}function w(n){n.button("loading"),n.hide(),$.ajax({method:"DELETE",url:"/posts/"+t}).done((function(n){n.deleted_at?(p.hide(),h.show(),g.addClass("transparency"),null!=e.parent&&e.parent.decrement_childs()):(p.show(),h.hide(),g.removeClass("transparency"),null!=e.parent&&e.parent.increment_childs()),h.button("reset"),p.button("reset")})).fail((function(){n.show()}))}function y(){c.attr("disabled","disabled"),l.attr("disabled","disabled"),e.descendants.html('<div class="text-align: center; font-size:48px;"><i class="fas fa-spinner fa-spin"></i></div>'),$.ajax({method:"GET",url:"/posts/"+t+"/descendants?level="+d}).done((function(n){e.descendants.html(n),e.descendants.children(".item").each((function(){s($(this),e)})),c.hide(),l.removeAttr("disabled"),l.show()})).always((function(){c.removeAttr("disabled")}))}function C(){e.descendants.find(".item").remove(),l.hide(),c.show()}function T(){v.hide(),$.ajax({method:"GET",url:"/posts/"+t+"/approve"}).done((function(e){e.is_accepted?v.hide():v.show()})).fail((function(){v.show()}))}function j(e){e.preventDefault(),bootbox.alert('<textarea class="form-control">'+m.data("href")+"</textarea>")}function E(n){n.preventDefault();var t=e.descendants.children(".reply-box").first();t.length<1?(_.addClass("loading-cap"),$.ajax({method:"GET",url:_.attr("href")}).done((function(n){e.descendants.append(n);var t=e.descendants.children(".reply-box").first();$(window).scrollTo(t),_.removeClass("loading-cap");var i=t.find("form").first();set_sceditor(i.find(".sceditor").first().get(0)),i.ajaxForm({dataType:"json",beforeSend:function(e){t.addClass("loading-cap")},success:function(n){$.ajax({method:"GET",url:"/posts/"+n.id}).done((function(i){t.removeClass("loading-cap"),t.after(i),t.remove(),e.descendants.find(".item[data-id='"+n.id+"']").each((function(){s($(this),e)})),e.increment_childs()}))},error:function(e){t.removeClass("loading-cap")}})}))):$(window).scrollTo(t)}function P(n){n.preventDefault(),b.hide(),$.ajax({method:"GET",url:b.attr("href")}).done((function(n){g.hide(),g.after(n);var t=e.self.find("form:first");set_sceditor(t.find(".sceditor").first().get(0)),$(window).scrollTo(e),t.ajaxForm({dataType:"json",beforeSend:function(e){t.addClass("loading-cap")},success:function(n){g.html(n.text),g.show(),t.remove(),s(e),$(window).scrollTo(e),b.show()},error:function(e){t.removeClass("loading-cap")}})})).fail((function(){b.show()}))}e.self=e.find("[data-self]:first"),e.parent=n,x(),m.removeAttr("href").unbind("click").on("click",j),v.unbind("click").on("click",T),p.unbind("click").on("click",(function(){w($(this))})),h.unbind("click").on("click",(function(){w($(this))})),e.find(".like").each((function(){(new i.a).init($(this))})),(new o.a).init(k),c.unbind("click").on("click",y),l.unbind("click").on("click",C),_.unbind("click").on("click",E),b.unbind("click").on("click",P),e.descendants.find(".item:first").siblings(".item").addBack().each((function(){s($(this),e)})),e.increment_childs=function(){var n=e.counter_expand_descendants.text();n=parseInt(n,10)+1,e.counter_expand_descendants.text(n),n=e.counter_compress_descendants.text(),n=parseInt(n,10)+1,e.counter_compress_descendants.text(n),n>0&&!c.is(":visible")&!l.is(":visible")&&l.show()},e.decrement_childs=function(){var n=e.counter_expand_descendants.text();n=parseInt(n,10)-1,e.counter_expand_descendants.text(n),n=e.counter_compress_descendants.text(),n=parseInt(n,10)-1,e.counter_compress_descendants.text(n),n<1&&(c.is(":visible")||l.is(":visible"))&&l.hide()};var D=e.find(".get_user_agent").first();function L(){var e=bootbox.dialog({message:" ",closeButton:!0,backdrop:!0}).init((function(){var n=e.find(".bootbox-body");n.html('<div class="spinner" style="text-align: center; font-size:48px;"><i class="fas fa-spinner fa-spin"></i></div>'),$.ajax({method:"GET",url:"/user_agents/post/"+a}).done((function(e){n.find(".spinner").remove(),n.html(e)})).always((function(){}))}))}D.unbind("click").on("click",L)}},ZI2Y:function(e,n,t){"use strict";function i(){var e=this;this.init=function(n){e.button=n,e.title=n.data("title"),e.description=n.data("description"),e.url=n.data("url"),e.image=n.data("image"),e.dialog=bootbox.dialog({message:'<div class="spinner" style="text-align: center; font-size:48px;"><i class="fas fa-spinner fa-spin"></i></div>',closeButton:!0,backdrop:!0,show:!1,size:"small"}),e.button.unbind("click").on("click",(function(){e.dialog.modal("show")})),e.dialog.on("shown.bs.modal",(function(n){e.onDialogOpen(n)}))},this.onDialogOpen=function(n){var t='<div data-direction="vertical" data-size="m" class="ya-share2" data-services="collections,vkontakte,facebook,odnoklassniki,';void 0!==e.image&&(t+="pinterest,"),t+='twitter,telegram,whatsapp,viber,moimir,blogger,delicious,digg,reddit,evernote,linkedin,lj,pocket,qzone,renren,sinaWeibo,surfingbird,tencentWeibo,tumblr,skype" data-counter="true" data-title="'+e.title+'" data-description="'+e.description+'" ',void 0!==e.image&&(t+='data-image="'+e.image+'" '),t+='data-url="'+e.url+'">';$(n.relatedTarget);e.dialog.find(".bootbox-body").html(t),$.getScript("//cdn.jsdelivr.net/npm/yandex-share2/share.js",(function(e,n,t){}))}}t.d(n,"a",(function(){return i}))},kW2s:function(e,n,t){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){var e=this;this.init=function(n){e.like=n,e.like.btn_liked=e.like.find("button.liked"),e.like.btn_empty=e.like.find("button.empty"),e.like.counter=e.like.find(".counter"),e.like.last_liked_status=e.like.data("liked"),e.likeable_type=e.like.data("likeable-type"),e.likeable_id=e.like.data("likeable-id"),e.likeable_create_user_id=e.like.data("likeable-create-user-id"),e.mouseOverDelay=1e3,e.mouseLeaveDelay=1e3,e.like.btn_liked.unbind("click").on("click",e.onClick),e.like.btn_empty.unbind("click").on("click",e.onClick),e.like.popover({boundary:"window",placement:"top",html:!0,trigger:"manual",animation:!1}),e.like.unbind("shown.bs.popover").bind("shown.bs.popover",e.onPopoverShown),e.like.unbind("mouseover").bind("mouseover",e.onButtonMouseOver),e.like.unbind("mouseleave").bind("mouseleave",e.onButtonMouseLeave)},this.onClick=function(){var n=$(this);e.isLiked()?e.decrementCounter():e.incrementCounter(),n.addClass("loading-cap"),e.setPopoverHtml('<i class="fas fa-spinner fa-spin"></i>'),e.getCount()>0&&e.showPopover(),e.request(n)},this.onButtonMouseOver=function(){clearTimeout(e.mouseOverTimer),e.mouseOverTimer=setTimeout((function(){!e.isMouseAway()&&e.getCount()>0&&(e.load(),e.isDataLoaded()&&e.showPopover())}),e.mouseOverDelay)},this.onButtonMouseLeave=function(){clearTimeout(e.mouseLeaveTimer),e.mouseLeaveTimer=setTimeout((function(){e.hidePopoverIfMouseAwayAndPopoverOpened()}),e.mouseLeaveDelay)},this.onPopoverShown=function(){e.getPopover().unbind("mouseleave").bind("mouseleave",e.onPopoverMouseLeave)},this.onPopoverMouseLeave=function(){clearTimeout(e.mouseLeaveTimer),e.mouseLeaveTimer=setTimeout((function(){e.hidePopoverIfMouseAwayAndPopoverOpened()}),e.mouseLeaveDelay)},this.hidePopoverIfMouseAwayAndPopoverOpened=function(){e.isMouseAway()&&e.hidePopover()},this.request=function(n){$.ajax({method:"GET",url:"/likes/"+e.likeable_type+"/"+e.likeable_id}).done(e.onDoneLoadClick).fail(e.fail).always((function(){n.removeClass("loading-cap")}))},this.onDoneLoadClick=function(n){n.like.id?n.like.deleted_at?e.toggleToEmpty():e.toggleToLiked():e.toggleToEmpty(),e.setCount(n.item.like_count),e.getCount()<1?e.hidePopover():e.refreshTooltipContent(n.latest_likes_html)},this.fail=function(n){e.hidePopover(),e.isLiked()?e.incrementCounter():e.decrementCounter()},this.refreshTooltipContent=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";""!==n?(e.dataLoaded(),e.setPopoverHtml(n)):(e.dataNotLoaded(),e.load())},this.load=function(){e.like.data("ajax-start")||e.isDataLoaded()||$.ajax({url:"/likes/"+e.likeable_type+"/"+e.likeable_id+"/tooltip",cache:!0,beforeSend:function(n){e.showPopover(),e.setPopoverHtml('<i class="fas fa-spinner fa-spin"></i>'),e.like.data("ajax-start",!0)}}).done((function(n){e.setPopoverHtml(n),e.dataLoaded()})).always((function(){e.like.data("ajax-start",!1)}))},this.incrementCounter=function(){var n=e.getCount();e.setCount(n+1)},this.decrementCounter=function(){var n=e.getCount();e.setCount(n-1)},this.setCount=function(n){n=parseInt(n),e.like.counter.text(n),n<1?e.like.counter.hide():e.like.counter.show()},this.toggleToLiked=function(){e.like.btn_liked.show(),e.like.btn_empty.hide()},this.toggleToEmpty=function(){e.like.btn_liked.hide(),e.like.btn_empty.show()},this.setPopoverHtml=function(n){var t=$("<div>"+n+"</div>");t.find("img.lazyload").each((function(){$(this).attr("src",$(this).data("src"))}));var i=e.like.attr("aria-describedby");e.isPopoverOpened()&&$("#"+i).find(".popover-body").html(t.html()),e.like.attr("data-content",t.html()),e.updatePopover()},this.dataLoaded=function(){e.like.data("data-loaded",!0)},this.dataNotLoaded=function(){e.like.data("data-loaded",!1)},this.isDataLoaded=function(){return!!e.like.data("data-loaded")},this.isPopoverOpened=function(){var n=e.like.attr("aria-describedby");return"undefined"!==i(n)&&!1!==n},this.isMouseAway=function(){var n=e.like.attr("aria-describedby");return!e.like.is(":hover")&&0===$("#"+n+":hover").length},this.isLiked=function(){return!!e.like.btn_liked.is(":visible")},this.isTouchDevice=function(){return window.isTouchDevice()},this.getCount=function(){return parseInt(e.like.counter.first().text(),10)},this.getPopover=function(){var n=e.like.attr("aria-describedby");return $("#"+n).first()},this.showPopover=function(){e.isPopoverOpened()||(e.like.popover("show"),e.like.popover("update"))},this.hidePopover=function(){e.isPopoverOpened()&&e.like.popover("hide")},this.updatePopover=function(){e.isPopoverOpened()&&e.like.popover("update")}}t.d(n,"a",(function(){return o}))}});